<h2>Live Parking Dashboard</h2>
<div id="slots" style="display:flex; flex-wrap:wrap;"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
firebase.initializeApp({
  databaseURL: "https://parkvision-tech-default-rtdb.asia-southeast1.firebasedatabase.app"
});
const db = firebase.database();

db.ref("parkingLocations").on("value", snap => {
  const container = document.getElementById("slots");
  container.innerHTML = "";

  snap.forEach(loc => {
    const locDiv = document.createElement("div");
    locDiv.innerHTML = `<h3>${loc.val().name}</h3>`;
    locDiv.style.marginBottom = "20px";

    loc.child("slots").forEach(slot => {
      const s = slot.val();
      const div = document.createElement("div");
      div.innerHTML = `${slot.key}: <b>${s.status}</b>`;
      div.style.padding = "10px";
      div.style.margin = "5px";
      div.style.borderRadius = "10px";
      div.style.display = "inline-block";
      div.style.width = "120px";
      div.style.textAlign = "center";
      div.style.background = s.status === "AVAILABLE" ? "#00ff99" : (s.status === "BOOKED" ? "orange" : "red");
      locDiv.appendChild(div);
    });

    container.appendChild(locDiv);
  });
});
</script>
